# CIS 3319 Lab 2 - HMAC-SHA1

## Libraries Used
1. socket - for socket programming to simulate the server and client
2. struct - used to help with implementing SHA-1
3. secrets - used in server.py in case you want to test this project with a randomly generated number instead of the number in Random_number.txt

## Project Files
1. server.py
2. client.py
3. sha1.py
4. password.txt
5. Random_number.txt
6. testing_results_lab_2.JPG
7. programdesign.txt

**server.py** - The server the client connects to. The socket code is based on the code provided in lab 1 from digitalocean.com. The server will wait until the client connects to it
and then it will either generate a random number or use the random number provided in 'Random_number.txt' depending on which mode the tester is using (This mode can be changed by
commenting and uncommenting the appropriate code in 'server.py' which I have noted), which it will use to calculate Si along with the password in 'password.txt' and Si's hash value
using the sha1 function in 'sha1.py'. Next, the server will ask for a message input. This message will then be sent to the client. Then the server will wait for a response from the
client and then print out the response from the client which will be the HMAC value that the client calculated. The server will then calculate its own HMAC value by calculating So
using the random number and the hash value of Si calculated earlier and then using the sha1 function in 'sha1.py' on So to get the hash value of So which is the HMAC value. The
server will print out its own calculated HMAC value, compare it to the client's calculated HMAC, and let the user know whether the calculated HMAC values are identical or not 
determines whether the autentication was successful or not. This process will keep repeating until the user inputs the word 'exit' into the server which closes the server and
client.

**client.py** - The client that connects to the server. The socket code is based on the code provided in lab 1 from digitalocean.com. The client will connect to the server, receive a
random number generated by the server, and wait for a message from the server. After the client receives a message from the server, the client goes through the same process of
calculating Si, Si's hash value, So, and So's hash value I described above in the server.py section using the password in 'password.txt' and the random number received from the
server. The client then sends this calculated HMAC value to the server and waits again for another message from the server. The client will close if the user inputs the message 'exit'
into the server.

**sha1.py** - A manual implementation of HMAC SHA-1 based on the pseudocode provided in the 'SHA1.md' file. I put a test case in this file for the message 'abc' which you can test
against the expected results in the provided 'Testing results.md' file. To do this, uncomment the stuff at the very bottom of the file and the print statement I put in the
function sha1().

**password.txt** - Holds the shared password between the server and client used for calculating HMAC.

**Random_number.txt** - Holds a random number you can use to test the project. If you want to test this project with a randomly generated number instead of the number in this file,
I have provided code for you to do so that you can just uncomment. Just make sure you also comment the code used to open and use the number in this file. I have set the server
to use the random number in 'Random_number.txt'.

**testing_results_lab_2.JPG** - A screenshot of some test runs I did of my project.

**programdesign.txt** - The file you're looking at right now and the documentation for my project.

## How to test project:
1. Open up two terminals
2. Run the server on one terminal using 'python server.py' and the client on the other terminal using 'python client.py' in that order. On Mac or Linux, you ahve to use 'python3'
   instead of 'python'.
3. The server will ask for a message input to be sent to the client. Type a message on the client side such as 'server'. This message will be sent to the client.
4. Now go to the client and you should see message received from the server and the calculated HMAC value the server got.
5. After that, go back to the server side and you should see the calculated HMAC value received from the client, the server's calculated HMAC value, and whether the
   server found the client's calculated HMAC value and the server's calculated HMAC value to be equivalent or not.
6. At this point, the server will ask for another message input to be sent to the client. Continue entering messages until you're done testing and then input 'exit' into the
   server which will close the server and client.
7. The HMAC value should be the same throughout the whole time you test the project since the same random number is used the whole time the client is connected to the server.
